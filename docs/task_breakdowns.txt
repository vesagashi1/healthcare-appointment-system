# Healthcare Appointment System - Task Breakdown

## Project Status Overview

### ‚úÖ Completed
- **Backend Framework**: Express.js with routes and controllers
- **SQL Database**: PostgreSQL with comprehensive schema (users, roles, permissions, appointments, patient records, wards, etc.)
- **Basic Authentication**: JWT-based auth with login/register
- **Authorization**: RBAC (Role-Based Access Control) system
- **Core Routes**: Auth, Patients, Appointments, Test (public/protected)
- **Audit Logging**: Middleware for tracking actions
- **Database Migrations**: Initial schema and RBAC seeding, search_path fixes applied
- **Frontend Framework** (20% of grade) ‚úÖ:
  - React 19 + TypeScript + Vite + SWC
  - React Router DOM for routing
  - Production-ready UI (Login, Register, Home, Doctor Dashboard pages)
  - API service layer (http.ts, authApi.ts, patientApi.ts, appointmentApi.ts, testApi.ts)
  - Auth Context for state management (JWT in localStorage)
  - Protected route wrapper (ProtectedRoute.tsx)
  - Vite dev proxy configured (/api ‚Üí backend:5001)
  - Modern CSS modules with gradient designs
  - TypeScript compilation passing, production build successful
- **Git Version Control** (5% of grade) ‚úÖ: Repository initialized, commits pushed

### ‚ùå Missing (Required)
1. **NoSQL Database Integration** (10% of grade) - Not implemented
2. **Refresh Tokens** (Part of Auth feature) - Only access tokens exist
3. **3 Additional Features** (30% of grade) - Need to choose and implement
4. **Project Management Tool** (5% of grade) - Need to set up (Trello/Jira/ClickUp)

---

## Task Division

### üîµ YOUR TASKS (Person 1)

#### Phase 1: Core Requirements (High Priority)
1. **Frontend Framework Setup** (20% - Critical) ‚úÖ COMPLETED
   - [x] Choose and initialize frontend framework (React + TypeScript + Vite + SWC)
   - [x] Set up project structure (pages, shared/auth, shared/api)
   - [x] Configure routing (React Router DOM)
   - [x] Set up API service layer for backend communication (http.ts with fetch wrapper)
   - [x] Create authentication context/state management (AuthContext.tsx with localStorage)
   - [x] Implement login/register pages (production-ready UI with illustrations)
   - [x] Create protected route wrapper (ProtectedRoute.tsx with role-based guards)
   - [x] Vite proxy configuration for /api
   - [x] Production build passing (TypeScript + Vite)
   - [x] Home page (professional landing page with hero section)
   - [x] Doctor dashboard pages (patient records, appointment approval)

2. **NoSQL Database Integration** (10% - Critical)
   - [ ] Choose NoSQL database (MongoDB recommended)
   - [ ] Set up MongoDB connection in backend
   - [ ] Design NoSQL schema for:
     - [ ] Real-time notifications/chat messages
     - [ ] User activity logs (complementary to SQL audit logs)
     - [ ] Session management data
   - [ ] Create MongoDB models/schemas
   - [ ] Integrate with existing Express routes

3. **Complete Authentication System** (Part of Additional Feature #1)
   - [ ] Implement refresh token mechanism
   - [ ] Create token refresh endpoint
   - [ ] Update frontend to handle token refresh
   - [ ] Add token storage (httpOnly cookies or secure localStorage)
   - [ ] Implement automatic token refresh on expiry

#### Phase 2: Additional Features (Choose 1-2)
4. **Real-Time Notifications** (10% - Additional Feature #4)
   - [ ] Set up WebSocket server (Socket.io)
   - [ ] Create notification system in MongoDB
   - [ ] Implement notification service
   - [ ] Create notification routes/endpoints
   - [ ] Frontend: Notification component and real-time updates
   - [ ] Connect to appointment status changes, new records, etc.

5. **Advanced Search Functionality** (10% - Additional Feature #5)
   - [ ] Backend: Search endpoints with filters
   - [ ] Implement full-text search for:
     - [ ] Patients (by name, email, ID)
     - [ ] Appointments (by date, doctor, status)
     - [ ] Medical records (by type, content, date)
     - [ ] Doctors (by name, specialization)
     - [ ] Users (by role, name, email)
   - [ ] Add sorting and pagination
   - [ ] Frontend: Search UI components with filters
   - [ ] Frontend: Search results display

#### Phase 3: Supporting Tasks
6. **Project Management Setup**
   - [ ] Create Trello/Jira/ClickUp board
   - [ ] Add all tasks as cards
   - [ ] Set up comprehensive README.md with setup instructions
   - [ ] Document all API endpoints
   - [ ] Add environment variable documentation
   - [ ] Create user role documentation
   - [x] Task breakdown file maintained (this file)
   - [ ] Create README.md with setup instructions
   - [ ] Document API endpoints
   - [ ] Add environment variable documentation
   - [ ] Create user role documentation

---

### üü¢ COLLEAGUE TASKS (Person 2)

#### Phase 1: Core Requirements (High Priority)
1. **Backend Enhancements**
   - [ ] Complete missing CRUD operations:
     - [ ] Doctor routes (list, get by ID, update)
     - [ ] Nurse routes (list, assignments)
     - [ ] Ward management routes
     - [ ] Caregiver routes (link to patients)
   - [ ] Appointment enhancements:
     - [ ] Cancel appointment endpoint
     - [ ] List appointments with filters
     - [ ] Appointment history
   - [ ] Patient record enhancements:
     - [ ] Update record (with correction mechanism)
     - [ ] Delete record (soft delete)
   - [ ] Admin routes:
     - [ ] User management (CRUD)
     - [ ] Role management
     - [ ] Ward management

2. **NoSQL Database Integration** (Support)
   - [ ] Help design NoSQL schema
   - [ ] Create MongoDB connection utilities
   - [ ] Write tests for NoSQL operations

#### Phase 2: Additional Features (Choose 1-2)
3. **Data Export/Import** (10% - Additional Feature #11)
   - [ ] Backend: Export endpoints (CSV, Excel, JSON)
   - [ ] Implement export for:
     - [ ] Patients list
     - [ ] Appointments list
     - [ ] Medical records
   - [ ] Backend: Import endpoints with validation
   - [ ] Frontend: Export UI buttons
   - [ ] Frontend: Import file upload component
   - [ ] Error handling for invalid imports

4. **Dynamic Report Generation** (10% - Additional Feature #12)
   - [ ] Design report templates
   - [ ] Backend: Report generation service
   - [ ] Create reports for:
     - [ ] Appointment statistics (by date range, doctor, status)
     - [ ] Patient activity reports
     - [ ] User activity reports (from audit logs)
   - [ ] PDF generation (using libraries like pdfkit or puppeteer)
   - [ ] Frontend: Report configuration UI
   - [ ] Frontend: Report display and download

5. **Real-Time Communication (WebSockets)** (10% - Additional Feature #2)
   - [ ] Set up Socket.io server
   - [ ] Implement chat system (doctor-patient, nurse-doctor)
   - [ ] Store chat messages in MongoDB
   - [ ] Create chat rooms/channels
   - [ ] Frontend: Chat UI components
   - [ ] Real-time message delivery

#### Phase 3: Supporting Tasks
6. **Testing & Quality**
   - [ ] Write unit tests for backend routes
   - [ ] Write integration tests
   - [ ] Test authentication/authorization flows
   - [ ] Test all role permissions
   - [ ] Frontend component tests

7. **Git Management**
   - [ ] Ensure clean commit messages
   - [ ] Create meaningful branches
   - [ ] Set up .gitignore properly
   - [ ] Document git workflow

8. **Docker & Deployment**
   - [ ] Complete docker-compose.yml setup
   - [ ] Add MongoDB to docker-compose
   - [ ] Create Dockerfiles for frontend and backend
   - [ ] Environment configuration
   - [ ] Deployment documentation

---

## Recommended Feature Selection

Based on the healthcare domain, we recommend implementing:

1. **Authentication & Authorization** (with refresh tokens) ‚úÖ Already started
2. **Real-Time Notifications** (WebSockets) - Very relevant for healthcare
3. **Advanced Search** - Essential for managing patients/records
4. **Data Export/Import** - Useful for reporting and backups

Alternative options:
- **Real-Time Communication (WebSockets)** - Chat between staff/patients
- **Dynamic Report Generation** - For admin analytics

---

## Priority Order

### Week 1-2: Critical Requirements
1. Frontend Framework (Person 1)
2. NoSQL Integration (Person 1)
3. Backend CRUD completion (Person 2)
4. Refresh Tokens (Person 1)

### Week 3-4: Additional Features
5. Real-Time Notifications (Person 1)
6. Advanced Search (Person 1)
7. Data Export/Import (Person 2)
8. Dynamic Reports (Person 2)

### Week 5: Polish & Testing
9. Testing (Person 2)
10. Documentation (Person 1)
11. Docker setup (Person 2)
12. Project Management tool (Both)

---

## Technical Decisions Needed

1. **Frontend Framework**: React, Vue, or Angular? (Recommend React)
2. **NoSQL Database**: MongoDB, Firebase, or Cassandra? (Recommend MongoDB)
3. **State Management**: Redux, Context API, Zustand? (Recommend Context API for simplicity)
4. **UI Library**: Material-UI, Ant Design, Tailwind CSS? (Recommend Material-UI or Tailwind)
5. **WebSocket Library**: Socket.io (recommended)
6. **PDF Generation**: pdfkit, puppeteer, or jsPDF? (Recommend pdfkit for backend)

---

## Notes

- Both team members should review each other's code
- Use feature branches and pull requests
- Keep commits small and meaningful
- Update this document as tasks are completed
- Regular sync meetings to ensure integration works

---

## Quick Start Checklist
x] Person 1: Initialize React frontend ‚úÖ (React 19 + TS + Vite)
- [ ] Person 1: Set up MongoDB connection (NEXT PRIORITY)
- [ ] Person 1: Implement refresh tokens (NEXT PRIORITY)
- [ ] Person 2: Complete missing backend routes
- [ ] Both: Set up project management tool (PENDING)
- [ ] Both: Review and finalize feature selection

---

## Recent Changes (Last Updated: Feb 4, 2026)

### Doctor Dashboard Implementation ‚úÖ (Feb 4, 2026)
- **Backend**: Created GET /api/dashboard/doctor endpoint
  - Stats: total patients (from wards), appointments (pending/approved/completed/cancelled), recent records (30 days)
  - Recent activity: last 10 appointment updates with patient names
  - Today's appointments: filtered by current date
  - Role-based access control (doctor only)
- **Frontend API**: Created doctorApi.ts with full TypeScript types
  - getDashboard(), getMyAppointments(), getMyPatients()
  - approveAppointment(), rejectAppointment()
- **Dashboard Page**: DoctorDashboardPage.tsx with production-ready UI
  - 4 gradient stat cards (patients, pending appointments, records, total)
  - Today's appointments section with status badges
  - Recent activity timeline
  - Quick action buttons for common tasks
  - Persistent navigation bar with user avatar
  - Loading/error states with retry
- **Styling**: DoctorDashboard.module.css
  - Glassmorphism cards with backdrop blur
  - Gradient backgrounds consistent with HomePage
  - Status badges (pending/approved/completed/cancelled)
  - Fully responsive design
- **TypeScript Fixes**: All errors resolved
  - Added 'name' to JWT payload (backend + frontend types)
  - Fixed import statements (requestJson instead of http)
  - Replaced 'any' with proper types
  - Type-only imports for DashboardData
  - All TypeScript checks passing ‚úÖ

### Frontend Completed (Feb 3, 2026)
- React app scaffolded with Vite + TypeScript + SWC
- Routing configured with React Router DOM
- Auth system: JWT storage in localStorage, AuthContext provider, token decoding
- API layer: requestJson wrapper with HttpError, typed API functions
- Pages implemented:
  - Login (production UI with illustration, password toggle)
  - Register (patient-only self-registration, password confirmation, terms/privacy)
  - Home (hero section, features, user welcome banner)
  - Doctor Dashboard (patient records by ID, appointment approval by ID)
- Protected routes with role-based guards
- CSS modules with modern gradient designs
- TypeScript compilation passing
- Production build successful (8.42 KB CSS, 253.95 KB JS)

### Backend Enhancements
- Added public test route (/api/test/public) for health checks
- Database migration search_path fixes applied

### Next Steps
1. Complete all role-specific pages (see detailed breakdown below)
2. Backend list endpoints (appointments, patients, users with filters)
3. MongoDB integration (notifications, sessions, activity logs)
4. Choose and implement 3 additional features
5. Set up project management tool

---

## Role-Specific Pages Status

### ü©∫ Doctor Pages

#### ‚úÖ Completed
- Doctor dashboard page exists (basic skeleton)
- Patient records by ID page (create record form)
- Appointment approval by ID page

#### ‚ùå Missing (Critical)
- [ ] **Doctor Dashboard Home**: Overview with stats (pending appointments count, my patients count, recent activity)
- [ ] **My Appointments List**: 
  - [ ] Backend: GET /api/appointments?doctorId=X
  - [ ] Frontend: Table/list showing all my appointments
  - [ ] Filter by status (pending/approved/completed)
  - [ ] Click to view details ‚Üí approve/reject buttons
- [ ] **My Patients List**:
  - [ ] Backend: GET /api/patients?doctorId=X (patients assigned to me)
  - [ ] Frontend: Table/list of my patients
  - [ ] Search by name/ID
  - [ ] Click to view patient details and records
- [ ] **Patient Details Page**:
  - [ ] View patient info
  - [ ] List all medical records for this patient
  - [ ] Add new medical record form 
  - [ ] View appointment history for this patient
- [ ] **Appointment Details Page**:
  - [ ] View appointment info
  - [ ] Approve/reject buttons
  - [ ] Add notes to appointment

---

### üë®‚Äç‚öïÔ∏è Nurse Pages

#### ‚úÖ Completed
- None

#### ‚ùå Missing (Critical)
- [ ] **Nurse Dashboard Home**: Overview with ward info, patient count
- [ ] **Ward Patients List**:
  - [ ] Backend: GET /api/patients?wardId=X (my assigned ward)
  - [ ] Frontend: Table/list of patients in my ward
  - [ ] Search/filter patients
  - [ ] Click to view patient details
- [ ] **Patient Medical Records**:
  - [ ] View patient records (based on permissions)
  - [ ] Update existing records (if permitted)
  - [ ] Cannot create new records or approve appointments
- [ ] **Ward Appointments**:
  - [ ] Backend: GET /api/appointments?wardId=X
  - [ ] Frontend: List appointments for patients in my ward
  - [ ] View-only (cannot approve)

---

### ü§í Patient Pages

#### ‚úÖ Completed
- None

#### ‚ùå Missing (Critical)
- [ ] **Patient Dashboard Home**: Upcoming appointments, recent records summary
- [ ] **My Appointments**:
  - [ ] Backend: GET /api/appointments?patientId=X (my appointments only)
  - [ ] Frontend: List of my appointments
  - [ ] Show status (pending/approved/completed)
  - [ ] View appointment details
- [ ] **Book Appointment**:
  - [ ] Backend: GET /api/doctors (list available doctors)
  - [ ] Frontend: Form to book appointment
  - [ ] Select doctor, date, reason
  - [ ] Submit ‚Üí POST /api/appointments
- [ ] **My Medical Records**:
  - [ ] Backend: GET /api/patient-records?patientId=X
  - [ ] Frontend: List my medical records (read-only)
  - [ ] View record details (diagnosis, treatment, notes)
  - [ ] Cannot edit or delete
- [ ] **My Profile**:
  - [ ] View my account info
  - [ ] Edit contact details
  - [ ] View assigned caregivers/doctors

---

### üë¥ Caregiver Pages

#### ‚úÖ Completed
- None

#### ‚ùå Missing (Critical)
- [ ] **Caregiver Dashboard Home**: List of assigned patients summary
- [ ] **Assigned Patients List**:
  - [ ] Backend: GET /api/patients?caregiverId=X (patients assigned to me)
  - [ ] Frontend: Table/list of my assigned patients
  - [ ] Search by name
  - [ ] Click to view patient details
- [ ] **Patient Medical Records (Read-Only)**:
  - [ ] View patient medical records
  - [ ] Cannot edit diagnosis/treatment (doctor only)
  - [ ] Can add care observations/notes
- [ ] **Add Care Notes**:
  - [ ] Backend: POST /api/patient-records/:id/notes (add observation to existing record)
  - [ ] Frontend: Form to add care notes/observations
  - [ ] Track daily activities, medication taken, symptoms
- [ ] **Patient Appointments**:
  - [ ] View appointments for assigned patients
  - [ ] See appointment status
  - [ ] Cannot book or approve appointments

---

### üë®‚Äçüíº Admin Pages

#### ‚úÖ Completed
- None (admin role exists but no UI)

#### ‚ùå Missing (Critical)
- [ ] **Admin Dashboard Home**: System stats (total users, patients, appointments, recent activity)
- [ ] **User Management**:
  - [ ] Backend: GET /api/users (list all users)
  - [ ] Backend: POST /api/users (create user)
  - [ ] Backend: PUT /api/users/:id (update user)
  - [ ] Backend: DELETE /api/users/:id (delete user)
  - [ ] Backend: PUT /api/users/:id/roles (assign/change roles)
  - [ ] Frontend: Users table with search/filter by role
  - [ ] Frontend: Create user form
  - [ ] Frontend: Edit user modal
  - [ ] Frontend: Assign role dropdown (admin, doctor, nurse, patient, caregiver)
- [ ] **Ward Management**:
  - [ ] Backend: GET /api/wards (list all wards)
  - [ ] Backend: POST /api/wards (create ward)
  - [ ] Backend: PUT /api/wards/:id/assign (assign doctor/nurse to ward)
  - [ ] Frontend: Wards list
  - [ ] Frontend: Assign staff to ward
- [ ] **System Overview**:
  - [ ] View all appointments (god mode)
  - [ ] View all patient records
  - [ ] Assign caregivers to patients
  - [ ] Backend: PUT /api/patients/:id/caregivers (link caregiver to patient)

---

### üîß Shared Components Needed

#### ‚ùå Missing (Critical for all roles)
- [ ] **Navigation Bar/Header**:
  - [ ] Logo and app name
  - [ ] Role-based navigation links
  - [ ] User info display (name, role)
  - [ ] Logout button
  - [ ] Responsive mobile menu
- [ ] **Loading States**:
  - [ ] Spinner component
  - [ ] Skeleton loaders for tables/lists
- [ ] **Error Handling UI**:
  - [ ] Toast notifications for success/error messages
  - [ ] Empty state components (no data)
  - [ ] 404 page
- [ ] **Form Components**:
  - [ ] Reusable form inputs with validation
  - [ ] Date picker
  - [ ] Select/dropdown components
  - [ ] Form error messages
- [ ] **Table/List Components**:
  - [ ] Reusable data table with sorting
  - [ ] Pagination component
  - [ ] Search bar component
  - [ ] Filter dropdown

---

## Revised 3-Day Plan (Realistic)

### Day 1: Complete Backend Endpoints (6-8 hours)
1. List appointments with filters (doctorId, patientId, wardId, status)
2. List patients with filters (doctorId, caregiverId, wardId)
3. List users (admin only)
4. Create user endpoint (admin)
5. Assign roles endpoint (admin)
6. Add care notes endpoint (caregiver)
7. Book appointment endpoint (patient)

### Day 2: Complete Role Pages (8-10 hours)
1. **Doctor**: Appointments list, patients list, approve appointment UI
2. **Patient**: My appointments, book appointment form, my records
3. **Admin**: User management table, create user form, assign roles
4. **Shared**: Navigation bar, loading spinner, error toasts

### Day 3: Polish + NoSQL + One Feature (8-10 hours)
1. **Caregiver/Nurse pages** (if time allows)
2. **MongoDB integration**: Store activity logs, sessions (10% grade)
3. **One additional feature**: Real-time notifications OR simple search (10% grade)
4. **Trello board setup** (5% grade - 15 min)
5. **Testing and bug fixes**

### Total Achievable: 25-35% additional grade
- NoSQL (10%)
- At least 1 additional feature (10%)
- Trello (5%)
- Plus what you already have (Frontend 20% + Git 5% + Backend/DB/Auth base)
